<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>A01_Vue生命周期</title>
    <script src="../../../js/vue.js"></script>
    <script src="../../../js/moment.min.js"></script>
 </head>

<body>

    <div id="root">
        <div>
            <hr>
                <div v-html="table" class="divhtm"></div>
            <hr>
            <div>{{ init}}</div>
            <div>{{beforeCreate}}</div>
            <div>{{created}}</div>
            <hr>
            <div>{{el_}}</div>
            <hr>
            <div>{{ beforeMount}}</div>
            <hr>
            <div>{{mounted_msg}}</div>
            <div>{{mounted_process}}</div>
            <div>{{mounted_updated}}</div>
            <hr>
            <div>{{destroyvue}}</div>
            <hr>
            <div> <button @click="addition">加法计数器</button> <span>{{add}}</span></div>
            <button @click="destroy">销毁vue容器</button>
            <hr>
            <div>{{time}}</div>
            <button @click=stoptime>停止计时器</button>
            <!-- <button @click=opentime>停止计时器</button> -->

        </div>

    </div>
    <script type="text/javascript">
        // 创建Vue实例
        new Vue({
            // 回调函数
            data() {
                return {
                    table:`常用的生命周期钩子<br>
                    1.mounted: 发送ajax请求、启动定时器、绑定自定义事件、订阅消息等[初始化操作].</br>
                    2.beforeDestroy: 清除定时器、解绑自定义事件、取消订阅消息等[收尾工作]。
                    <br>关于销毁Vue实例<br>
                    1.销毁后开发者工具看不到任何信息。<br>
                    2.销毁后自定义事件会失效，但原生DOM事件依然有效3.一般不会再beforeDestroy操作数据，因为即便操作数据，也不会再触发更新流程了。<br>`,

                    add: 0,
                    time:"" ,

                    init: "初始化Vue视图容器对象",
                    beforeCreate: "beforeCreate()---初始化:DOM对象  生命周期、事件，但数据代理还未开始。此时:无法通过vm访问到data中的数据、methods中的方法。",
                    created: "created()---初始化: 数据监测、数据代理。 此时: 可以通过vm访问到data中的数据、methods中配置的方法",
                    el_: "el:''此阶段Vue开始解析模板，生成虚拟DOM(内存中)，页面还不能显示解析好的Vue内容。（会在el中查找/在Vue视图容器对象在后面查找）",
                    beforeMount: "beforeMount()将内存中的 虚拟DOM 转为 真实DOM 插入页面。此时1.页面早现的是未经Vue编译的DOM结构.2.所有对DOM的操作，最终都不奏效。",
                    mounted_msg: "标题——此时1.页面中早现的是经过Vue编译的DOM2.对DOM的操作均有效(尽可免)。至此初始化过程结束，一般在此进行: 开启定时器、发送网络请求、订阅消息、绑定自定义事件、等初始化操作",
                    mounted_beforeUpdate: "beforeUpdate()更新前状态 状态更新之前执行，此时data中的状态值是最新的，但界面还没开始渲染，是旧数据",
                    mounted_process: "process()根据新数据，生成新的虚拟DOM，随后与旧的虚拟DOM进行比较，最终完成页面更新，即:完成了Model -->View的更新",
                    mounted_updated: "updated()此时: 数据是新的页面也是新的，即:页面和数据保持同步。",
                    beforeDestroy: "销毁前 vue容器加载完毕: vm中所有的: data、methods、指令等等，都处于可用状态，马上要执行销毁过程,一般在此阶段:关闭定时器、取消订阅消息解绑自定义事件等收尾操作",
                    destroyvue: "销毁前vue(vue的内置指令和方法可以正常使用但是不会渲染)"
                }
            },
            // 方法
            methods: {
                // 加法计数器
                addition() {
                    this.add = this.add++
                },
                // clearInterval() 方法可取消由 setInterval() 设置的定时器
                stoptime(){
                    console.log("time.....................................")
                    clearInterval( this.timeInterval)
                  
                },
                
                // 完整销毁Vue
                destroy() {
                    console.log("销毁vue1")
                    this.$destroy()
                    console.log("销毁vue2")
                },
            },

            beforeCreate() { console.log("初始化DOM对象 beforeCreate()") },
            created() { console.log("初始化: 数据监测、数据代理 created()") },
            beforeMount() { console.log("beforeMount完成模板编译，还未挂载到页面  beforeMount()") },
            beforeUpdate() { console.log("渲染前 beforeUpdate()") },
            updated() { console.log("渲染后 updated()") },
            mounted(){
               
                this.timeInterval=setInterval(()=>{
                    this.time= moment(new Date).format("YYYY-MM-DD*HH:mm:ss/SSS")
                },1)
            },
            beforeDestroy (){
                console.log("销毁前")
                clearInterval( this.timeInterval)

            },
            destroyvue(){
                console.log("销毁后")
              


            }
           

        }).$mount("#root")
    </script>
</body>

</html>